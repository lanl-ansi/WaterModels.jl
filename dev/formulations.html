<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Network Formulations · WaterModels</title><meta name="title" content="Network Formulations · WaterModels"/><meta property="og:title" content="Network Formulations · WaterModels"/><meta property="twitter:title" content="Network Formulations · WaterModels"/><meta name="description" content="Documentation for WaterModels."/><meta property="og:description" content="Documentation for WaterModels."/><meta property="twitter:description" content="Documentation for WaterModels."/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-367975-10"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-367975-10', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.svg" alt="WaterModels logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">WaterModels</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="quickguide.html">Getting Started</a></li><li><a class="tocitem" href="network-data.html">Network Data Format</a></li><li><a class="tocitem" href="result-data.html">Result Data Format</a></li><li><a class="tocitem" href="math-model.html">Mathematical Models</a></li></ul></li><li><span class="tocitem">Library</span><ul><li class="is-active"><a class="tocitem" href="formulations.html">Network Formulations</a><ul class="internal"><li><a class="tocitem" href="#Type-Hierarchy"><span>Type Hierarchy</span></a></li><li><a class="tocitem" href="#Water-Models"><span>Water Models</span></a></li><li><a class="tocitem" href="#User-Defined-Abstractions"><span>User-Defined Abstractions</span></a></li><li><a class="tocitem" href="#Supported-Formulations"><span>Supported Formulations</span></a></li></ul></li><li><a class="tocitem" href="specifications.html">Problem Specifications</a></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Modeling Components</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="objective.html">Objective</a></li><li><a class="tocitem" href="variables.html">Variables</a></li><li><a class="tocitem" href="constraints.html">Constraints</a></li></ul></li><li><a class="tocitem" href="parser.html">File I/O</a></li></ul></li><li><a class="tocitem" href="developer.html">Developer</a></li><li><a class="tocitem" href="examples.html">Examples</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li class="is-active"><a href="formulations.html">Network Formulations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="formulations.html">Network Formulations</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/lanl-ansi/WaterModels.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/lanl-ansi/WaterModels.jl/blob/master/docs/src/formulations.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Network-Formulations"><a class="docs-heading-anchor" href="#Network-Formulations">Network Formulations</a><a id="Network-Formulations-1"></a><a class="docs-heading-anchor-permalink" href="#Network-Formulations" title="Permalink"></a></h1><p>All methods for constructing WaterModels are ultimately derived from the following type:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="WaterModels.AbstractWaterModel" href="#WaterModels.AbstractWaterModel"><code>WaterModels.AbstractWaterModel</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Root of the water formulation type hierarchy.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/WaterModels.jl/blob/f4745f918129393bb685854c6065b72c681bc10d/src/core/base.jl#L1">source</a></section></article><h2 id="Type-Hierarchy"><a class="docs-heading-anchor" href="#Type-Hierarchy">Type Hierarchy</a><a id="Type-Hierarchy-1"></a><a class="docs-heading-anchor-permalink" href="#Type-Hierarchy" title="Permalink"></a></h2><p>We begin with the top of the modeling hierarchy, where we can distinguish among approximations and relaxations for the the physics of water flow. There are currently six formulations supported in WaterModels. Specifically, there are two exact nonconvex formulations, one approximation, and three relaxations:</p><pre><code class="language-julia hljs"># Exact formulations.
abstract type AbstractNCModel &lt;: AbstractWaterModel end
abstract type AbstractNCDModel &lt;: AbstractNCModel end

# Approximation-based formulations.
abstract type AbstractLAModel &lt;: AbstractNCModel end

# Relaxation-based formulations.
abstract type AbstractCRDModel &lt;: AbstractNCDModel end
abstract type AbstractLRDModel &lt;: AbstractCRDModel end
abstract type AbstractPWLRDModel &lt;: AbstractCRDModel end</code></pre><h2 id="Water-Models"><a class="docs-heading-anchor" href="#Water-Models">Water Models</a><a id="Water-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Water-Models" title="Permalink"></a></h2><p>Each of the abstract modeling types are used to derive a more specific WaterModel type:</p><pre><code class="language-julia hljs">mutable struct NCWaterModel &lt;: AbstractNCModel @wm_fields end
mutable struct NCDWaterModel &lt;: AbstractNCDModel @wm_fields end
mutable struct LAWaterModel &lt;: AbstractLAModel @wm_fields end
mutable struct CRDWaterModel &lt;: AbstractCRDModel @wm_fields end
mutable struct LRDWaterModel &lt;: AbstractLRDModel @wm_fields end
mutable struct PWLRDWaterModel &lt;: AbstractPWLRDModel @wm_fields end</code></pre><h2 id="User-Defined-Abstractions"><a class="docs-heading-anchor" href="#User-Defined-Abstractions">User-Defined Abstractions</a><a id="User-Defined-Abstractions-1"></a><a class="docs-heading-anchor-permalink" href="#User-Defined-Abstractions" title="Permalink"></a></h2><p>User-defined abstractions can begin from a root abstract model like <code>AbstractWaterModel</code>, e.g.,</p><pre><code class="language-julia hljs">abstract type AbstractFooModel &lt;: AbstractWaterModel end
mutable struct FooWaterModel &lt;: AbstractFooModel @wm_fields end</code></pre><p>They can also be derived from existing modeling types, e.g.,</p><pre><code class="language-julia hljs">abstract type AbstractSpecialWaterModel &lt;: AbstractPWLRDModel end
mutable struct SpecialWaterModel &lt;: AbstractSpecialWaterModel @wm_fields end</code></pre><p>As an example, the above might be used to define some specialized piecewise-linear, direction-based water flow relaxation. This definition of new types (<code>AbstractSpecialWaterModel</code> and <code>SpecialWaterModel</code>) would allow the developer to reuse common variables, constraints, and objectives already defined over <code>AbstractPWLRDModel</code> while also potentially overriding other variables, constraints, and objectives. This overriding is accomplished by implementing new but equivalently-named model-building functions that are defined over <code>AbstractSpecialWaterModel</code> instead of <code>AbstractPWLRDModel</code> (or its ancestors, i.e., <code>AbstractCRDModel</code>, <code>AbstractNCDModel</code>, and <code>AbstractWaterModel</code>).</p><h2 id="Supported-Formulations"><a class="docs-heading-anchor" href="#Supported-Formulations">Supported Formulations</a><a id="Supported-Formulations-1"></a><a class="docs-heading-anchor-permalink" href="#Supported-Formulations" title="Permalink"></a></h2><p>All formulation names refer to how the underlying physics of a water network are modeled. For example, the <code>LRD</code> model uses a linear relaxation (LR), direction-based (D) model of water network physics.</p><table><tr><th style="text-align: right">Formulation</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right">NC</td><td style="text-align: right">Physics modeled using nonlinear equations.</td></tr><tr><td style="text-align: right">NCD</td><td style="text-align: right">Physics modeled using nonlinear equations. Flow direction modeled using binary variables.</td></tr><tr><td style="text-align: right">LA</td><td style="text-align: right">Physics modeled using piecewise-linear approximations.</td></tr><tr><td style="text-align: right">CRD</td><td style="text-align: right">Physics modeled using convex relaxations. Flow direction modeled using binary variables.</td></tr><tr><td style="text-align: right">LRD</td><td style="text-align: right">Physics modeled using linear relaxations. Flow direction modeled using binary variables.</td></tr><tr><td style="text-align: right">PWLRD</td><td style="text-align: right">Physics modeled using piecewise relaxations. Flow direction modeled using binary variables.</td></tr></table></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="math-model.html">« Mathematical Models</a><a class="docs-footer-nextpage" href="specifications.html">Problem Specifications »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Monday 18 December 2023 22:20">Monday 18 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
